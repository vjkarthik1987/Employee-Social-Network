<% layout('layouts/_layout') %>
<section style="max-width:900px;margin:24px auto;">
  <h1 style="margin:0 0 8px;">Admin Settings — <%= company.name %></h1>
  <p style="margin:0 0 16px;">Only ORG_ADMIN can edit these.</p>

  <form action="/<%= company.slug %>/admin/settings" method="POST" style="display:grid;gap:18px;">

    <!-- Identity -->
    <div class="card" style="padding:16px;">
      <h3 style="margin:0 0 8px;">Identity</h3>
      <label style="display:block;margin:8px 0;">
        <div>Product Name (internal brand)</div>
        <input name="productName" type="text" value="<%= company.productName || '' %>" placeholder="e.g., SunVerse / Pulse / Loop" style="width:100%;padding:8px;">
      </label>
      <label style="display:block;margin:8px 0;">
        <div>Tagline (optional)</div>
        <input name="tagline" type="text" value="<%= company.tagline || '' %>" placeholder="Where our people connect & celebrate" style="width:100%;padding:8px;">
      </label>
    </div>

    <!-- Branding -->
    <div class="card" style="padding:16px;">
      <h3 style="margin:0 0 8px;">Branding</h3>
      <div style="display:flex;gap:16px;align-items:center;">
        <label>
          <div>Primary Color</div>
          <input name="themePrimary" type="color" value="<%= company.branding?.theme?.primary || '#1976d2' %>">
        </label>
        <label>
          <div>Secondary Color</div>
          <input name="themeSecondary" type="color" value="<%= company.branding?.theme?.secondary || '#ffffff' %>">
        </label>

        <div style="margin-left:auto;display:flex;align-items:center;gap:8px;">
          <div>Preview:</div>
          <div style="width:24px;height:24px;background:<%= company.branding?.theme?.primary %>;border-radius:4px;"></div>
          <div style="width:24px;height:24px;background:<%= company.branding?.theme?.secondary %>;border-radius:4px;border:1px solid #ddd;"></div>
        </div>
      </div>
    </div>

    <!-- Policies -->
    <div class="card" style="padding:16px;">
      <h3 style="margin:0 0 8px;">Policies</h3>

      <div style="margin:8px 0;">
        <div style="margin-bottom:6px;">Posting Mode</div>
        <label style="margin-right:16px;">
          <input type="radio" name="postingMode" value="OPEN" <%= company.policies?.postingMode === 'OPEN' ? 'checked' : '' %> >
          Open — publish instantly
        </label>
        <label>
          <input type="radio" name="postingMode" value="MODERATED" <%= company.policies?.postingMode === 'MODERATED' ? 'checked' : '' %> >
          Moderated — approval required
        </label>
      </div>

      <label style="display:block;margin:8px 0;">
        <div>Blocked Words (comma-separated)</div>
        <textarea name="blockedWordsCSV" rows="3" placeholder="spam,badword,..." style="width:100%;padding:8px;"><%= (company.policies?.blockedWords || []).join(', ') %></textarea>
      </label>

      <label style="display:block;margin:8px 0;">
        <div>Retention Days (7–3650)</div>
        <input name="retentionDays" type="number" min="7" max="3650" value="<%= company.policies?.retentionDays || 730 %>" style="width:180px;padding:8px;">
      </label>
    </div>

    <div>
      <button class="btn" type="submit">Save Settings</button>
    </div>
  </form>
</section>
